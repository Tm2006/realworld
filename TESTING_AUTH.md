# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìã –ß—Ç–æ –º—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ª–æ–≥–∏–Ω–∞
- **JWT —É—Ç–∏–ª–∏—Ç—ã** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
- **Endpoints**:
  - `POST /api/users` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - `POST /api/users/login` - –≤—Ö–æ–¥
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –ø–æ–ª–µ–π (email, username, password)
- **CORS middleware** –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### ‚ö†Ô∏è –ü–æ–∫–∞ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (TODO):
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö JWT —Ç–æ–∫–µ–Ω–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email/username

**–ù–æ —ç—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API!** Endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö.

---

## üöÄ –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

### –í –ø–µ—Ä–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É —Å–µ—Ä–≤–µ—Ä–∞
cd /home/tim/src/my/realworld/srv

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
go run cmd/realworld/main.go
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
‚úÖ Database connected successfully
üöÄ Starting server on :8080
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã.

---

## üß™ –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –í–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

### **–¢–µ—Å—Ç 1: –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**

```bash
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "user": {
      "username": "testuser",
      "email": "test@example.com",
      "password": "password123"
    }
  }' | jq .
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "user": {
    "id": 1,
    "email": "test@example.com",
    "username": "testuser",
    "bio": "",
    "image": "",
    "token": "jwt.token.here"
  }
}
```

**–°—Ç–∞—Ç—É—Å –∫–æ–¥:** `201 Created`

---

### **–¢–µ—Å—Ç 2: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑ username**

```bash
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "user": {
      "email": "test@example.com",
      "password": "password123"
    }
  }' | jq .
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "errors": {
    "username": ["–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"]
  }
}
```

**–°—Ç–∞—Ç—É—Å –∫–æ–¥:** `422 Unprocessable Entity`

---

### **–¢–µ—Å—Ç 3: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑ email**

```bash
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "user": {
      "username": "testuser",
      "password": "password123"
    }
  }' | jq .
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "errors": {
    "email": ["–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"]
  }
}
```

---

### **–¢–µ—Å—Ç 4: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑ password**

```bash
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "user": {
      "username": "testuser",
      "email": "test@example.com"
    }
  }' | jq .
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "errors": {
    "password": ["–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"]
  }
}
```

---

## üîê –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞

### **–¢–µ—Å—Ç 5: –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥**

```bash
curl -X POST http://localhost:8080/api/users/login \
  -H "Content-Type: application/json" \
  -d '{
    "user": {
      "email": "test@example.com",
      "password": "password123"
    }
  }' | jq .
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "user": {
    "id": 1,
    "email": "test@example.com",
    "username": "demo",
    "bio": "Demo user",
    "image": "https://api.realworld.io/images/demo-avatar.png",
    "token": "jwt.token.here"
  }
}
```

**–°—Ç–∞—Ç—É—Å –∫–æ–¥:** `200 OK`

---

### **–¢–µ—Å—Ç 6: –í—Ö–æ–¥ –±–µ–∑ email**

```bash
curl -X POST http://localhost:8080/api/users/login \
  -H "Content-Type: application/json" \
  -d '{
    "user": {
      "password": "password123"
    }
  }' | jq .
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "errors": {
    "email": ["–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"]
  }
}
```

---

### **–¢–µ—Å—Ç 7: –í—Ö–æ–¥ –±–µ–∑ password**

```bash
curl -X POST http://localhost:8080/api/users/login \
  -H "Content-Type: application/json" \
  -d '{
    "user": {
      "email": "test@example.com"
    }
  }' | jq .
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "errors": {
    "password": ["–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"]
  }
}
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤

### –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–¥ –≤–º–µ—Å—Ç–µ —Å –æ—Ç–≤–µ—Ç–æ–º:

```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–¥–∞
curl -i -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "user": {
      "username": "newuser",
      "email": "new@example.com",
      "password": "secure123"
    }
  }'
```

–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `HTTP/1.1 201 Created`

---

## üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞

–í –ø–µ—Ä–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–≥–¥–µ –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä) –≤—ã —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥–∏:

```
üìù POST /api/users - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: testuser
"POST http://localhost:8080/api/users HTTP/1.1" from [::1]:12345 - 201 158B in 1.234ms

üîê POST /api/users/login - –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª: demo
"POST http://localhost:8080/api/users/login HTTP/1.1" from [::1]:12346 - 200 245B in 0.567ms
```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: Connection refused
```bash
curl: (7) Failed to connect to localhost port 8080
```

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –≤ –ø–µ—Ä–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

---

### –ü—Ä–æ–±–ª–µ–º–∞: 404 Not Found

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `http://localhost:8080/api/users`
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `http://localhost:8080/users`
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `http://localhost:8080/api/user` (–¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)

---

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –ø–∞–¥–∞–µ—Ç –∏–ª–∏ –∑–∞–≤–∏—Å–∞–µ—Ç

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
# Ctrl+C –≤ –ø–µ—Ä–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
go run cmd/realworld/main.go
```

---

## üìù –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Å–∫–æ–ø–æ–º (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
cd /home/tim/src/my/realworld/srv && go run cmd/realworld/main.go
```

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:
```bash
curl -X POST http://localhost:8080/api/users -H "Content-Type: application/json" -d '{"user":{"username":"testuser","email":"test@example.com","password":"password123"}}' | jq .
```

### –í—Ö–æ–¥:
```bash
curl -X POST http://localhost:8080/api/users/login -H "Content-Type: application/json" -d '{"user":{"email":"test@example.com","password":"password123"}}' | jq .
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–∞:
```bash
curl -i -X POST http://localhost:8080/api/users -H "Content-Type: application/json" -d '{"user":{"username":"user1","email":"user1@test.com","password":"pass123"}}'
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å `201 Created`
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON —Å user –∏ token
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø—É—Å—Ç—ã—Ö –ø–æ–ª—è—Ö)
- [ ] –í—Ö–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å `200 OK`
- [ ] –í—Ö–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON
- [ ] –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —ç–º–æ–¥–∑–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- [ ] CORS headers –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç (–º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å `-i`)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º—ã –¥–æ–±–∞–≤–∏–º:

1. **–†–µ–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –ë–î** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **Bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
3. **JWT —Ç–æ–∫–µ–Ω—ã** - –Ω–∞—Å—Ç–æ—è—â–∏–µ —Ç–æ–∫–µ–Ω—ã –≤–º–µ—Å—Ç–æ mock
4. **Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** - –∑–∞—â–∏—Ç–∞ endpoints
5. **–ü—Ä–æ–≤–µ—Ä–∫—É —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏** - email –∏ username –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏

**–£–¥–∞—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ**